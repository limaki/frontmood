<div class="login-container" id="top">
  <div class="card">
    <div class="card-header">
      <!-- Logo de la institución -->
      <img src="../../../assets/instituto.png" alt="Logo de la Institución" class="logo" />
      <h2>Acceso a la Plataforma</h2>
    </div>
    <div class="card-body">
      <p class="description">
        Bienvenido al sistema de la Institución. Por favor, ingrese sus credenciales para acceder a la plataforma. Si no recuerda su contraseña, contacte al administrador.
      </p>

      <!-- Spinner de carga con mensaje personalizado y advertencia -->
      <div class="loading-container" *ngIf="loading">
        <p-progressSpinner styleClass="custom-spinner"></p-progressSpinner>
        <p class="loading-message">Por favor, espera un momento mientras procesamos tu solicitud...</p>
        <!-- Mensaje adicional en rojo para indicar el tiempo estimado -->
        <p class="time-warning">Puede tardarse varios minutos</p>
      </div>

      <!-- Formulario de inicio de sesión, se oculta cuando loading es true -->
      <form *ngIf="!loading" (ngSubmit)="login()">
        <!-- Campo de correo electrónico -->
        <div class="p-field">
          <label for="email">Correo Electrónico</label>
          <input id="email" type="email" pInputText [(ngModel)]="authRequest.email" name="email" required placeholder="ejemplo@institucion.edu">
        </div>

        <!-- Campo de contraseña -->
        <div class="p-field">
          <label for="password">Contraseña</label>
          <input id="password" type="password" pPassword [(ngModel)]="authRequest.password" name="password" required placeholder="Ingrese su contraseña">
        </div>

        <!-- Botón de login -->
        <div class="p-field">
          <button pButton type="submit" label="Iniciar Sesión" class="p-button-primary"></button>
        </div>

        <!-- Mensaje de error -->
        <div *ngIf="errorMessage" class="error-message">
          <p>{{ errorMessage }}</p>
        </div>
      </form>

      <p class="info">¿Olvidaste tu contraseña? <a href="#">Recupérala aquí</a>.</p>
    </div>
  </div>

  <!-- SweetAlert2 Components -->
  <swal #loginSuccess title="Inicio de sesión exitoso" icon="success" text="Has iniciado sesión correctamente."></swal>
  <swal #loginError title="Error de inicio de sesión" icon="error" text="El correo electrónico o la contraseña son incorrectos."></swal>
  <swal #noTokenError title="Error" icon="error" text="No se recibió un token"></swal>
</div>

  

  <app-footer></app-footer>